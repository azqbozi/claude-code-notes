
### 知识点 2：快速理解陌生代码库（入门第一步）

#### 1. 核心逻辑

让 Claude 当 "项目讲解员"，先看整体（森林），再找细节（树木）。

#### 2. 两步操作法

text

```text
| 阶段 | 指令示例 | 目标 |
|------|----------|------|
| 概览项目 | 帮我总结这个项目：1. 技术栈；2. 核心功能；3. src 文件夹结构 | 快速摸清项目全貌 |
| 定位功能 | 用户登录的密码加密功能在哪个文件？要路径+代码片段 | 精准找到目标代码位置 |
```

#### 3. 关键点

text

```text
1. 指令必须具体列点，避免"帮我看看项目"这类模糊提问；
2. 工具会自动读取项目文件，无需手动上传；
3. 可以基于概览结果继续追问细节，保持会话上下文连贯。
```

### 知识点 3：高效修复代码错误（高频需求）

#### 1. 核心技巧：给足 "错误信息"

text

```text
必须提供的信息清单：
1. 完整报错日志（终端输出的所有红字内容）
2. 运行报错的命令（如 python manage.py runserver）
3. 环境信息（如 Python 3.9 / Django 4.2）
```

#### 2. 标准指令模板

text

```text
我运行 `python manage.py runserver` 时出现错误：[粘贴完整报错信息]
请帮我：1. 分析错误原因；2. 定位代码位置；3. 给出修复方案；4. 验证修复结果
```

#### 3. 操作流程

text

```text
1. 粘贴错误信息 → 发送指令
2. 查看 Claude 的原因分析和修复方案
3. 确认方案无误后，输入 Y 让工具自动修改文件
4. 重新运行代码，验证错误是否解决
```

#### 4. 关键点

text

```text
1. 修复前一定要让看方案再确认，避免工具误改核心代码；
2. 区分语法错误（如函数名写错）和逻辑错误（如算法漏洞）的不同处理方式；
3. 教会学员如何提取关键报错信息，快速定位问题核心。
```

### 知识点 4：生成单元测试用例（保障代码质量）

#### 1. 测试场景覆盖原则

text

```text
- 正常输入：验证功能是否符合预期
- 异常输入：验证空值、特殊字符等边界情况
- 错误输入：验证程序是否会优雅报错，不会直接崩溃
```

#### 2. 标准指令模板

text

```text
为 src/utils/encrypt_utils.py 里的 encrypt_password 函数生成 pytest 测试用例
要求：1. 覆盖正常密码、空密码、特殊字符密码；2. 保存到 tests/test_encrypt.py；3. 运行测试并返回结果
```

#### 3. 关键点

text

```text
1. 强调"测试与代码同步"，功能开发完成后必须写测试；
2. 教学员如何根据测试失败结果，让 Claude 进一步优化代码；
3. 讲解测试用例的核心思想：覆盖尽可能多的场景，尤其是边界场景。
```

### 知识点 5：代码重构（优化结构，不改功能）

#### 1. 重构三大目标

text

```text
- 简化冗余：提取重复代码为工具函数，减少代码量
- 提升可读性：规范变量名、函数名，添加清晰注释
- 增强稳定性：增加异常处理机制，避免程序崩溃
```

#### 2. 注册接口重构 - 标准指令模板

text

```text
重构 src/views/user_views.py 的注册接口
要求：
1. 提取重复的参数校验逻辑成独立工具函数；
2. 把变量名 a/b/c 改成 username/password/email；
3. 增加参数异常捕获机制，返回友好错误提示；
4. 对比重构前后代码差异，列出优化点。
```

#### 3. 重构对比示例（Python Django 项目）

python

```python
# 重构前的注册接口代码
def register(request):
    a = request.POST.get('username')
    b = request.POST.get('password')
    c = request.POST.get('email')
    
    if not a:
        return JsonResponse({'code':400, 'msg':'用户名不能为空'})
    if not b or len(b) <6:
        return JsonResponse({'code':400, 'msg':'密码长度不能小于6位'})
    if not c:
        return JsonResponse({'code':400, 'msg':'邮箱不能为空'})
    
    # 注册逻辑
    user = User(username=a, password=b, email=c)
    user.save()
    return JsonResponse({'code':200, 'msg':'注册成功'})

# 重构后的注册接口代码
def check_required_params(params, required_list):
    """参数校验工具函数 - 提取重复逻辑"""
    for param in required_list:
        if not params.get(param):
            return False, f"{param}不能为空"
    return True, ""

def register(request):
    try:
        # 规范变量名
        username = request.POST.get('username')
        password = request.POST.get('password')
        email = request.POST.get('email')
        
        # 调用工具函数校验参数
        is_valid, msg = check_required_params(request.POST, ['username', 'password', 'email'])
        if not is_valid:
            return JsonResponse({'code':400, 'msg':msg})
        
        # 密码长度校验
        if len(password) <6:
            return JsonResponse({'code':400, 'msg':'密码长度不能小于6位'})
        
        # 注册逻辑
        user = User(username=username, password=password, email=email)
        user.save()
        return JsonResponse({'code':200, 'msg':'注册成功'})
    
    except Exception as e:
        # 增加异常捕获
        return JsonResponse({'code':500, 'msg':f'注册失败：{str(e)}'})
```

#### 4. 重构前后差异对比表

text

```text
| 优化维度 | 重构前 | 重构后 |
|----------|--------|--------|
| 代码冗余 | 重复写3次参数校验逻辑 | 提取为 check_required_params 工具函数 |
| 变量命名 | 无意义的 a/b/c | 语义化的 username/password/email |
| 异常处理 | 无，直接崩溃 | try-except 捕获，返回 500 错误提示 |
| 可读性 | 代码杂乱，逻辑不清晰 | 结构分明，注释完善 |
```

#### 5. 关键点

text

```text
1. 重构核心原则：功能不变，只优化代码结构和质量；
2. 要求 Claude 输出"重构对比表"，清晰展示优化点；
3. 重构后必须测试功能，确保原有逻辑不受影响；
4. 教会学员识别"代码坏味道"：重复代码、魔法变量、无注释等。
```

### 知识点 6：Git 版本管理（不用记命令）

#### 1. 高频 Git 操作指令

text

```text
| 场景 | 指令示例 |
|------|----------|
| 提交代码 | 提交所有修改的文件，生成规范提交信息，格式「类型(范围): 描述」，提交前列出修改文件 |
| 分支操作 | 创建分支 feature/user-profile，然后切换到该分支 |
| 合并分支 | 切换到 develop 分支，合并 feature/user-profile，有冲突则分析原因并修复 |
| 查看记录 | 显示最近 10 次提交记录，用简洁格式展示 |
```

#### 2. 关键点

text

```text
1. 强调"提交信息规范"，如 fix(utils): 修复密码加密函数名错误；
2. 如何处理合并冲突，优先保留双方有效代码；
3. 讲解 Git 分支管理最佳实践：主分支 develop、功能分支 feature/*、修复分支 bugfix/*。
```

### 知识点 7：生成项目文档（代码与文档同步）

#### 1. 两类核心文档指令

text

```text
| 文档类型 | 指令示例 |
|----------|----------|
| README.md | 生成项目根目录的 README，包含项目介绍、环境要求、安装步骤、启动命令、核心功能 |
| 接口文档 | 为 src/views 下的用户接口生成 Markdown 文档，每个接口要写路径、请求方式、参数、返回值，保存到 docs/user_api.md |
```

#### 2. 教学关键点

text

```text
1. 文档要"实用"，避免空话，比如安装步骤要写具体命令；
2. 强调"文档更新"，代码修改后要同步更新文档；
3. 教会学员如何编写"用户友好型"文档：清晰的结构、详细的示例、常见问题解答。
```

## 三、实战高频指令清单（直接复制使用）

### 1. 代码库理解

text

```text
# 项目概览
帮我总结这个项目的技术栈、核心功能、文件夹结构

# 功能定位
用户登录功能在哪个文件？要路径和代码片段
```

### 2. 开发调试

text

```text
# 新增功能
在 src/views/user_views.py 新增手机号登录接口，校验格式+返回 JWT token

# 修复 bug
[粘贴报错信息] 帮我分析原因、定位代码、修复并验证
```

### 3. 测试重构

text

```text
# 生成测试
为 src/utils/encrypt_utils.py 生成 pytest 测试用例，覆盖3种场景

# 代码重构
重构注册接口，提取参数校验逻辑+规范变量名
```

### 4. Git 管理

text

```text
# 提交代码
提交所有修改，生成规范提交信息，先列修改文件

# 合并分支
切换到 develop，合并 feature/user-profile，解决冲突
```

### 5. 文档生成

text

```text
# 生成 README
生成项目 README，包含安装、启动、核心功能

# 更新文档
更新 docs/user_api.md 的注册接口，新增手机号参数
```

## 四、教学小贴士

text

```text
1. 指令越具体，结果越精准：必须让学员明确"文件路径、功能要求、格式规范"；
2. 先看方案再执行：所有修改文件的操作，都要先预览方案，确认无误再输入 Y；
3. 重视验证步骤：每一步操作后，都要让学员运行代码或命令，验证结果是否符合预期；
4. 跨会话复用：关闭终端后，用 claude --continue 恢复之前的对话上下文；
5. 鼓励探索式提问：让学员基于 Claude 的回答继续追问，深入理解代码逻辑。
```